<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/usage.md.vm at 2025-05-16
 | Rendered using Apache Maven Fluido Skin 2.0.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Advanced Usage – Meta-Maven-Plugin Maven Plugin</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.1.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-05-16<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.1.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="plugin-info.html">Goals</a></li>
    <li><a href="example.html">Complete Example</a></li>
    <li class="active"><a>Usage</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Advanced_Usage"></a>
<h1>Advanced Usage</h1><section><a id="Executing_Plugins_in_Different_Maven_Phases"></a>
<h2>Executing Plugins in Different Maven Phases</h2>
<p>Meta-plugins can execute embedded plugins in any Maven phase by specifying the <code>&lt;phase&gt;</code> element in the embedded
plugin's execution. If no phase is explicitly identified, the embedded plugin's default phase is used.</p>
<p>For example, to run a plugin during the <code>compile</code> phase:</p>

<pre class="prettyprint"><code class="language-xml">&lt;plugin&gt;
    &lt;groupId&gt;com.github.ekryd.echo-maven-plugin&lt;/groupId&gt;
    &lt;artifactId&gt;echo-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.0.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;echo&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;compile&lt;/phase&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;message&gt;@{greeting}&lt;/message&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<p>The meta-plugin will generate a goal for each phase used in the embedded configuration, allowing you to invoke the
meta-plugin in those phases.</p></section><section><a id="Defining_and_Using_Variables"></a>
<h2>Defining and Using Variables</h2>
<p>Variable interpolation in meta-plugins follows standard Maven conventions with one additional change:</p>
<ul>

<li>Variables prefixed with <code>${}</code> are replaced with the value of the variable at the time of mete-plugin compilation.</li>
<li>Variables prefixed with <code>@{}</code> are replaced with the value of the variable at the time of meta-plugin execution.</li>
</ul>
<p>Additionally, execution parameters must be defined <code>&lt;parameters&gt;</code> section and referenced in embedded plugin
configurations using the <code>@{parameterName}</code> syntax. This enables dynamic configuration at meta-plugin execution time.</p>
<p>In the following example, the value of <code>&lt;message&gt;</code> is converted to <code>${gretting} Maven</code> during meta-plugin compilation,
and <code>Hello Maven</code> during meta-plugin execution.</p>

<pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
    &lt;name&gt;Maven&lt;/name&gt;
&lt;/properties&gt;
...
&lt;parameters&gt;
    &lt;parameter&gt;
        &lt;name&gt;greeting&lt;/name&gt;
        &lt;defaultValue&gt;Hello&lt;/defaultValue&gt;
    &lt;/parameter&gt;
&lt;/parameters&gt;
...
&lt;configuration&gt;
    &lt;message&gt;@{greeting} ${name}&lt;/message&gt;
&lt;/configuration&gt;
</code></pre></section><section><a id="Capturing_the_Maven_Execution_Environment"></a>
<h2>Capturing the Maven Execution Environment</h2>
<p>You can capture values from the Maven execution environment by referencing Maven properties in your meta-plugin's
parameter configurations. For example, to capture the project base directory:</p>

<pre class="prettyprint"><code class="language-xml">&lt;parameter&gt;
    &lt;name&gt;buildPath&lt;/name&gt;
    &lt;alias&gt;build.path&lt;/alias&gt;
    &lt;defaultValue&gt;@{project.basedir}&lt;/defaultValue&gt;
    &lt;required&gt;true&lt;/required&gt;
    &lt;readonly&gt;true&lt;/readonly&gt;
&lt;/parameter&gt;
</code></pre>
<p>During compilation, this parameter is mapped to a mojo parameter named <code>buildPath</code> with <code>/Users/rmichela/Code/meta-maven-plugin/meta-maven-plugin-maven-plugin</code> as a
default value. Making the parameter required and readonly hides it from direct user configuration. This allows the
meta-plugin to capture and access environment-specific Maven values at runtime.</p></section><section><a id="Running_Multiple_Executions_of_the_Meta_Maven_Plugin"></a>
<h2>Running Multiple Executions of the Meta Maven Plugin</h2>
<p>Like any other Maven plugin, the meta-plugin can be executed multiple times in a single build. This allows you to
generate multiple meta-plugin mojos with different configurations in the same build. Each execution can have its own
set of embedded plugins, and independent configuration. When doing so, Maven requires that each execution have a unique
<code>&lt;id&gt;</code> element. During code generation, the <code>&lt;id&gt;</code> is used to create a unique mojo name prefix for each execution.</p>
<p>For example, the following configuration generates two meta-plugin mojos named <code>hello-initialize</code> and
<code>goodbye-initialize</code>:</p>

<pre class="prettyprint"><code class="language-xml">&lt;plugin&gt;
    &lt;groupId&gt;io.github.rmichela&lt;/groupId&gt;
    &lt;artifactId&gt;meta-maven-plugin-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;hello&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;meta-meta-plugin&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                ...
            &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;goodbye&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;meta-meta-plugin&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                ...
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<p><em>Note!</em> While Maven technically allows plugins to be defined multiple times independently within the same POM, the
outcome is guaranteed to work. Maven warns you of this. The <code>meta-maven-plugin-maven-plugin</code> is designed only to work
with multiple <code>&lt;executions&gt;</code> of the same plugin instance, not multiple instances of the same plugin.</p></section><section><a id="Overriding_Embedded_Plugin_Versions"></a>
<h2>Overriding Embedded Plugin Versions</h2>
<p>Consumers of the generated meta-plugin can override the versions of embedded plugins by declaring them as dependencies
in the plugin configuration:</p>

<pre class="prettyprint"><code class="language-xml">&lt;plugin&gt;
    &lt;groupId&gt;io.github.rmichela&lt;/groupId&gt;
    &lt;artifactId&gt;using-echo-plugin&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.github.ekryd.echo-maven-plugin&lt;/groupId&gt;
            &lt;artifactId&gt;echo-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.1.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;
</code></pre>
<p>This ensures that the desired version of the embedded plugin is used during execution.</p></section><section><a id="Documenting_the_Meta-Plugin"></a>
<h2>Documenting the Meta-Plugin</h2>
<p>As part of compiling the meta-plugin, the <code>meta-maven-plugin-maven-plugin</code> generates the following additional plugin
goals:</p>
<ul>

<li><code>help</code> - The standard Maven help goal, which prints out the help information for the meta-plugin.</li>
<li><code>describe</code> - A goal that prints out the meta-plugin's embedded plugin configuration, it' parameters, and their
default values.</li>
</ul></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2025
</p>
        </div>
      </div>
    </footer>
  </body>
</html>